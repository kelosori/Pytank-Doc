
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../aquifer_api/">
      
      
        <link rel="next" href="../helpers/">
      
      
      <link rel="icon" href="../../../../../static/Icon 2.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>Analysis - PyTank</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#analysis-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../index.md" title="PyTank" class="md-header__button md-logo" aria-label="PyTank" data-md-component="logo">
      
  <img src="../../../../../static/Icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PyTank
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Analysis
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../index.md" title="PyTank" class="md-nav__button md-logo" aria-label="PyTank" data-md-component="logo">
      
  <img src="../../../../../static/Icon.png" alt="logo">

    </a>
    PyTank
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/user_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pytank Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/quick_starter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A quick start To Pytank
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/advance_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advance features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Create your items
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Create your items
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/well/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to create a Well?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/fluid_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Which fluid models do I need?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/tank/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to create a Tank?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Analyzing with Pytank
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../setup/aquifer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LetÂ´s create an Aquifer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../develop/develop_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Develop guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../develop/release_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release notes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" checked>
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Main Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Main Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../well_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Well
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fluid_model_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fluid Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../oil_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Oil Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../water_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Water
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tank_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tank
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aquifer_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aquifer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Analysis
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Analysis
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pytank.analysis" class="md-nav__link">
    <span class="md-ellipsis">
      analysis
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Analysis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.__init__--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.analytic_method" class="md-nav__link">
    <span class="md-ellipsis">
      analytic_method
    </span>
  </a>
  
    <nav class="md-nav" aria-label="analytic_method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.analytic_method--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.analytic_method--returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.analytic_method--raises" class="md-nav__link">
    <span class="md-ellipsis">
      Raises
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.campbell_data" class="md-nav__link">
    <span class="md-ellipsis">
      campbell_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.campbell_plot" class="md-nav__link">
    <span class="md-ellipsis">
      campbell_plot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="campbell_plot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.campbell_plot--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.campbell_plot--returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.havlena_oded_data" class="md-nav__link">
    <span class="md-ellipsis">
      havlena_oded_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.havlena_odeh_plot" class="md-nav__link">
    <span class="md-ellipsis">
      havlena_odeh_plot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="havlena_odeh_plot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.havlena_odeh_plot--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.havlena_odeh_plot--returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.mat_bal_df" class="md-nav__link">
    <span class="md-ellipsis">
      mat_bal_df
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mat_bal_df">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.mat_bal_df--returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_cum_prod_time" class="md-nav__link">
    <span class="md-ellipsis">
      plot_cum_prod_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_cum_prod_tot_time" class="md-nav__link">
    <span class="md-ellipsis">
      plot_cum_prod_tot_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_cum_prod_well" class="md-nav__link">
    <span class="md-ellipsis">
      plot_cum_prod_well
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_flow_rate_tank" class="md-nav__link">
    <span class="md-ellipsis">
      plot_flow_rate_tank
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_flow_rate_well" class="md-nav__link">
    <span class="md-ellipsis">
      plot_flow_rate_well
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_press_avg_liq_cum" class="md-nav__link">
    <span class="md-ellipsis">
      plot_press_avg_liq_cum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_press_avg_time" class="md-nav__link">
    <span class="md-ellipsis">
      plot_press_avg_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_press_liq_cum" class="md-nav__link">
    <span class="md-ellipsis">
      plot_press_liq_cum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_press_time" class="md-nav__link">
    <span class="md-ellipsis">
      plot_press_time
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Secondary Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Secondary Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../helpers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Helpers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vector_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vectors
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Others
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Others
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pvt_correlations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PVT Correlations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pytank.analysis" class="md-nav__link">
    <span class="md-ellipsis">
      analysis
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Analysis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.__init__--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.analytic_method" class="md-nav__link">
    <span class="md-ellipsis">
      analytic_method
    </span>
  </a>
  
    <nav class="md-nav" aria-label="analytic_method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.analytic_method--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.analytic_method--returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.analytic_method--raises" class="md-nav__link">
    <span class="md-ellipsis">
      Raises
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.campbell_data" class="md-nav__link">
    <span class="md-ellipsis">
      campbell_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.campbell_plot" class="md-nav__link">
    <span class="md-ellipsis">
      campbell_plot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="campbell_plot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.campbell_plot--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.campbell_plot--returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.havlena_oded_data" class="md-nav__link">
    <span class="md-ellipsis">
      havlena_oded_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.havlena_odeh_plot" class="md-nav__link">
    <span class="md-ellipsis">
      havlena_odeh_plot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="havlena_odeh_plot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.havlena_odeh_plot--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.havlena_odeh_plot--returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.mat_bal_df" class="md-nav__link">
    <span class="md-ellipsis">
      mat_bal_df
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mat_bal_df">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.mat_bal_df--returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_cum_prod_time" class="md-nav__link">
    <span class="md-ellipsis">
      plot_cum_prod_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_cum_prod_tot_time" class="md-nav__link">
    <span class="md-ellipsis">
      plot_cum_prod_tot_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_cum_prod_well" class="md-nav__link">
    <span class="md-ellipsis">
      plot_cum_prod_well
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_flow_rate_tank" class="md-nav__link">
    <span class="md-ellipsis">
      plot_flow_rate_tank
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_flow_rate_well" class="md-nav__link">
    <span class="md-ellipsis">
      plot_flow_rate_well
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_press_avg_liq_cum" class="md-nav__link">
    <span class="md-ellipsis">
      plot_press_avg_liq_cum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_press_avg_time" class="md-nav__link">
    <span class="md-ellipsis">
      plot_press_avg_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_press_liq_cum" class="md-nav__link">
    <span class="md-ellipsis">
      plot_press_liq_cum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytank.analysis.Analysis.plot_press_time" class="md-nav__link">
    <span class="md-ellipsis">
      plot_press_time
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="analysis-module"><strong>Analysis Module</strong></h1>


<div class="doc doc-object doc-module">



<a id="pytank.analysis"></a>
    <div class="doc doc-contents first">

      <p>analysis.py</p>
<p>This archive.py defines to calculated POES from material balance equation.</p>
<p>The logic is structure using Classes and methods.</p>


<details class="libraries" open>
  <summary>libraries</summary>
  <ul>
<li>pandas</li>
<li>matplotlib</li>
<li>pydantic</li>
<li>pandera</li>
<li>scipy</li>
<li>typing</li>
</ul>
</details>


  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pytank.analysis.Analysis" class="doc doc-heading">
            <code>Analysis</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


      <p>Class to calculate POES graphically and analytically.
It also allows to project graphics:
    - DataFrame with necessary information to material balance
    - Campbell
    - Exploratory data analysis (EDA) through graphics</p>
<h4 id="pytank.analysis.Analysis--parameters">Parameters</h4>
<p>tank_class : Tank
    Instance of the Tank class.
freq : str
    Frequency of data for the material balance equation.
position : str
    Position of the frequency of the date.
smooth : bool, optional
    Determines if the user wants to adjust the data. Default is False.
k : int, optional
    Degree of the cubic spline. Default is 3.
s : int, optional
    Smoothing factor. Default is 10e6.</p>

              <details class="quote">
                <summary>Source code in <code>pytank\analysis.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Analysis</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to calculate POES graphically and analytically.</span>
<span class="sd">    It also allows to project graphics:</span>
<span class="sd">        - DataFrame with necessary information to material balance</span>
<span class="sd">        - Campbell</span>
<span class="sd">        - Exploratory data analysis (EDA) through graphics</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    tank_class : Tank</span>
<span class="sd">        Instance of the Tank class.</span>
<span class="sd">    freq : str</span>
<span class="sd">        Frequency of data for the material balance equation.</span>
<span class="sd">    position : str</span>
<span class="sd">        Position of the frequency of the date.</span>
<span class="sd">    smooth : bool, optional</span>
<span class="sd">        Determines if the user wants to adjust the data. Default is False.</span>
<span class="sd">    k : int, optional</span>
<span class="sd">        Degree of the cubic spline. Default is 3.</span>
<span class="sd">    s : int, optional</span>
<span class="sd">        Smoothing factor. Default is 10e6.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tank_class</span><span class="p">:</span> <span class="n">Tank</span>
    <span class="n">freq</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">smooth</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span>
    <span class="n">s</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="n">k</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tank_class</span><span class="p">,</span>
                 <span class="n">freq</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">position</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">smooth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
                 <span class="n">s</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10e5</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tank_class : Tank</span>
<span class="sd">            Instance of the Tank class.</span>
<span class="sd">        freq : str</span>
<span class="sd">            Frequency of data for the material balance equation.</span>
<span class="sd">        position : str</span>
<span class="sd">            Position of the frequency of the date.</span>
<span class="sd">        smooth : bool, optional</span>
<span class="sd">            Determines if the user wants to adjust the data. Default is False.</span>
<span class="sd">        k : int, optional</span>
<span class="sd">            Degree of the cubic spline. Default is 3.</span>
<span class="sd">        s : float, optional</span>
<span class="sd">            Smoothing factor. Default is 10e6.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">tank_class</span><span class="o">=</span><span class="n">tank_class</span><span class="p">,</span>
                         <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span>
                         <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
                         <span class="n">smooth</span><span class="o">=</span><span class="n">smooth</span><span class="p">,</span>
                         <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
                         <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_calc_uw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Internal method to calculate underground withdrawal (F)</span>
<span class="sd">        per well using underground_withdrawal() function.</span>
<span class="sd">        :return:</span>
<span class="sd">        - pd.Dataframe: A DataFrame with underground withdrawal (F)</span>
<span class="sd">         information.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Call the internal methods that process production and pressure data</span>
        <span class="n">df_press</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">get_pressure_df</span><span class="p">()</span>
        <span class="n">df_prod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">get_production_df</span><span class="p">()</span>

        <span class="c1"># Validate df_press and df_prod</span>
        <span class="n">df_press_validate</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">_PressSchema</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">df_press</span><span class="p">))</span>
        <span class="n">df_prod_validate</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">_ProdSchema</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">df_prod</span><span class="p">))</span>

        <span class="c1"># Calculate the accumulated production in the pressure dataframe,</span>
        <span class="c1"># based on the production dataframe.</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="n">OIL_CUM_COL</span><span class="p">,</span> <span class="n">WATER_CUM_COL</span><span class="p">,</span> <span class="n">GAS_CUM_COL</span><span class="p">]:</span>
            <span class="n">df_press_validate</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_press_validate</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">interp_dates_row</span><span class="p">(</span>
                    <span class="n">x</span><span class="p">,</span>
                    <span class="n">DATE_COL</span><span class="p">,</span>
                    <span class="n">df_prod_validate</span><span class="p">,</span>
                    <span class="n">DATE_COL</span><span class="p">,</span>
                    <span class="n">col</span><span class="p">,</span>
                    <span class="n">WELL_COL</span><span class="p">,</span>
                    <span class="n">WELL_COL</span><span class="p">,</span>
                    <span class="n">left</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># For wells not available in the production data frame,</span>
            <span class="c1"># fill nans with 0</span>
            <span class="n">df_press_validate</span><span class="o">.</span><span class="n">fillna</span><span class="p">({</span><span class="n">col</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">uw_well</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Empty list to uw values</span>
        <span class="k">for</span> <span class="n">well</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">df_press_validate</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">WELL_COL</span><span class="p">):</span>
            <span class="n">group</span><span class="p">[</span><span class="n">UW_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">underground_withdrawal</span><span class="p">(</span>
                <span class="n">group</span><span class="p">,</span>
                <span class="n">OIL_CUM_COL</span><span class="p">,</span>
                <span class="n">WATER_CUM_COL</span><span class="p">,</span>
                <span class="n">GAS_CUM_COL</span><span class="p">,</span>
                <span class="n">OIL_FVF_COL</span><span class="p">,</span>
                <span class="n">WATER_FVF_COL</span><span class="p">,</span>
                <span class="n">GAS_FVF_COL</span><span class="p">,</span>
                <span class="n">RS_COL</span><span class="p">,</span>
                <span class="n">RS_W_COL</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">uw_well</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>

        <span class="n">df_press_validate</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">uw_well</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df_press_validate</span>

    <span class="k">def</span> <span class="nf">_pressure_vol_avg</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Internal method to calculate the average pressure per tank using</span>
<span class="sd">        press_vol_avg() function.</span>
<span class="sd">        :return:</span>
<span class="sd">            - pd.DataFrame: A DataFrame with the average pressure column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Encapsulation of DataFrame from internal private method</span>

        <span class="n">df_press</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_uw</span><span class="p">()</span>
        <span class="n">df_press_avg</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">df_press</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">TANK_COL</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">g</span><span class="p">:</span> <span class="n">pressure_vol_avg</span><span class="p">(</span>
                <span class="n">g</span><span class="p">,</span>
                <span class="n">WELL_COL</span><span class="p">,</span>
                <span class="n">DATE_COL</span><span class="p">,</span>
                <span class="n">PRESSURE_COL</span><span class="p">,</span>
                <span class="n">UW_COL</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">freq</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">,</span>
            <span class="p">))</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">smooth</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">]</span><span class="o">.</span>
                                          <span class="n">interpolate</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="s1">&#39;DAYS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">-</span>
                                    <span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">days</span>
            <span class="n">valid_data</span> <span class="o">=</span> <span class="n">df_press_avg</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
            <span class="n">spline</span> <span class="o">=</span> <span class="n">UnivariateSpline</span><span class="p">(</span><span class="n">valid_data</span><span class="p">[</span><span class="s1">&#39;DAYS&#39;</span><span class="p">],</span>
                                      <span class="n">valid_data</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
                                      <span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">,</span>
                                      <span class="n">k</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">k</span><span class="p">)</span>
            <span class="n">x_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="s2">&quot;DAYS&quot;</span><span class="p">]),</span>
                                <span class="nb">max</span><span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="s2">&quot;DAYS&quot;</span><span class="p">]),</span>
                                <span class="nb">len</span><span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]))</span>
            <span class="n">y_fit</span> <span class="o">=</span> <span class="n">spline</span><span class="p">(</span><span class="n">x_fit</span><span class="p">)</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="s2">&quot;AVG_PRESS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_press_avg</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">]</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">y_fit</span>

        <span class="k">return</span> <span class="n">df_press_avg</span>

    <span class="k">def</span> <span class="nf">mat_bal_df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtains the material balance parameters at a certain frequency.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pandas.DataFrame</span>
<span class="sd">            A DataFrame with the following columns:</span>
<span class="sd">            - Tank: Name of the tank.</span>
<span class="sd">            - START_DATETIME: Date.</span>
<span class="sd">            - PRESSURE_DATUM: Pressure value.</span>
<span class="sd">            - OIL_CUM_TANK: Oil cumulative production.</span>
<span class="sd">            - WATER_CUM_TANK: Water cumulative production.</span>
<span class="sd">            - GAS_CUM_TANK: Gas cumulative production.</span>
<span class="sd">            - Bo: Oil volumetric factor.</span>
<span class="sd">            - Bg: Gas volumetric factor.</span>
<span class="sd">            - GOR: Oil Solubility.</span>
<span class="sd">            - Bw: Water volumetric factor.</span>
<span class="sd">            - Rs_bw: Water Solubility.</span>
<span class="sd">            - Time_Step: Time lapses.</span>
<span class="sd">            - UW: Underground withdrawal.</span>
<span class="sd">            - Eo: Oil Expansion.</span>
<span class="sd">            - Eg: Gas Expansion.</span>
<span class="sd">            - Efw: Rock-fluid Expansion.</span>
<span class="sd">            - Cumulative We: Cumulative influx of water.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Encapsulation of DataFrame from internal private method</span>
        <span class="n">avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pressure_vol_avg</span><span class="p">()</span>

        <span class="c1">#  Validate df_prod from _prod_df_int</span>
        <span class="n">prod</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">_ProdSchema</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">get_production_df</span><span class="p">()))</span>

        <span class="c1"># Linear interpolated of average pressure</span>

        <span class="n">cols_input</span> <span class="o">=</span> <span class="p">[</span><span class="n">OIL_CUM_COL</span><span class="p">,</span> <span class="n">WATER_CUM_COL</span><span class="p">,</span> <span class="n">GAS_CUM_COL</span><span class="p">]</span>
        <span class="n">cols_output</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;oil_vol&quot;</span><span class="p">,</span> <span class="s2">&quot;water_vol&quot;</span><span class="p">,</span> <span class="s2">&quot;gas_vol&quot;</span><span class="p">]</span>
        <span class="n">prod</span><span class="p">[</span><span class="n">cols_output</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span>
            <span class="n">prod</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">WELL_COL</span><span class="p">)[</span><span class="n">cols_input</span><span class="p">])</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span>
            <span class="n">prod</span><span class="p">[</span><span class="n">cols_input</span><span class="p">]))</span>
        <span class="n">cols_group</span> <span class="o">=</span> <span class="p">[</span><span class="n">DATE_COL</span><span class="p">,</span> <span class="n">TANK_COL</span><span class="p">,</span> <span class="s2">&quot;oil_vol&quot;</span><span class="p">,</span> <span class="s2">&quot;water_vol&quot;</span><span class="p">,</span> <span class="s2">&quot;gas_vol&quot;</span><span class="p">]</span>
        <span class="n">df_tank</span> <span class="o">=</span> <span class="p">(</span><span class="n">prod</span><span class="p">[</span><span class="n">cols_group</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
            <span class="n">cols_group</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">TANK_COL</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">())</span>

        <span class="c1"># Rename of columns of DataFrame</span>
        <span class="n">df_tank</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
            <span class="n">columns</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;oil_vol&quot;</span><span class="p">:</span> <span class="n">OIL_CUM_COL</span><span class="p">,</span>
                <span class="s2">&quot;water_vol&quot;</span><span class="p">:</span> <span class="n">WATER_CUM_COL</span><span class="p">,</span>
                <span class="s2">&quot;gas_vol&quot;</span><span class="p">:</span> <span class="n">GAS_CUM_COL</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">oil_cum_per_tank</span> <span class="o">=</span> <span class="n">OIL_CUM_COL</span> <span class="o">+</span> <span class="s2">&quot;_TANK&quot;</span>
        <span class="n">water_cum_per_tank</span> <span class="o">=</span> <span class="n">WATER_CUM_COL</span> <span class="o">+</span> <span class="s2">&quot;_TANK&quot;</span>
        <span class="n">gas_cum_per_tank</span> <span class="o">=</span> <span class="n">GAS_CUM_COL</span> <span class="o">+</span> <span class="s2">&quot;_TANK&quot;</span>

        <span class="c1"># Interpolated Cumulative production</span>
        <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">cum_col</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                <span class="p">[</span><span class="n">oil_cum_per_tank</span><span class="p">,</span> <span class="n">water_cum_per_tank</span><span class="p">,</span> <span class="n">gas_cum_per_tank</span><span class="p">],</span>
                <span class="p">[</span><span class="n">OIL_CUM_COL</span><span class="p">,</span> <span class="n">WATER_CUM_COL</span><span class="p">,</span> <span class="n">GAS_CUM_COL</span><span class="p">],</span>
        <span class="p">):</span>
            <span class="n">avg</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">avg</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">g</span><span class="p">:</span> <span class="n">interp_dates_row</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">DATE_COL</span><span class="p">,</span> <span class="n">df_tank</span><span class="p">,</span> <span class="n">DATE_COL</span><span class="p">,</span>
                                           <span class="n">cum_col</span><span class="p">,</span> <span class="n">TANK_COL</span><span class="p">,</span> <span class="n">TANK_COL</span><span class="p">),</span>
                <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Sort by dates of DataFrame</span>
        <span class="n">df_mbal</span> <span class="o">=</span> <span class="n">avg</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">DATE_COL</span><span class="p">)</span>

        <span class="c1"># Interpolated PVT properties from pres_avg</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="n">OIL_FVF_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_bo_at_press</span><span class="p">(</span>
            <span class="n">df_mbal</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="n">GAS_FVF_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_bg_at_press</span><span class="p">(</span>
            <span class="n">df_mbal</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="n">RS_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_rs_at_press</span><span class="p">(</span>
            <span class="n">df_mbal</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>

        <span class="c1"># In case properties are calculated using correlations</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">salinity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">temperature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">unit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">df_mbal</span><span class="p">[</span>
                <span class="n">WATER_FVF_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">get_bw_at_press</span><span class="p">(</span>
                <span class="n">df_mbal</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
            <span class="n">df_mbal</span><span class="p">[</span><span class="n">RS_W_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">get_rs_at_press</span><span class="p">(</span>
                <span class="n">df_mbal</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>

            <span class="c1"># In case there are default values for Bw and Rs_w</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df_mbal</span><span class="p">[</span>
                <span class="n">WATER_FVF_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">get_default_bw</span><span class="p">()</span>
            <span class="n">df_mbal</span><span class="p">[</span><span class="n">RS_W_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">get_default_rs</span><span class="p">()</span>

        <span class="c1"># Creation of time lapses columns</span>
        <span class="n">first_time_lapse</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_timedelta</span><span class="p">(</span>
            <span class="n">df_mbal</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;D&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_time_lapse</span><span class="o">.</span><span class="n">days</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_mbal</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="n">GAS_FVF_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_mbal</span><span class="p">[</span><span class="n">GAS_FVF_COL</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

        <span class="c1"># Calculated values of Eo, Eg, Efw and F columns</span>
        <span class="n">mbal_term</span> <span class="o">=</span> <span class="n">ho_terms_equation</span><span class="p">(</span>
            <span class="n">df_mbal</span><span class="p">,</span>
            <span class="n">OIL_CUM_TANK</span><span class="p">,</span>
            <span class="n">WATER_CUM_TANK</span><span class="p">,</span>
            <span class="n">GAS_CUM_TANK</span><span class="p">,</span>
            <span class="n">PRESSURE_COL</span><span class="p">,</span>
            <span class="n">OIL_FVF_COL</span><span class="p">,</span>
            <span class="n">GAS_FVF_COL</span><span class="p">,</span>
            <span class="n">RS_COL</span><span class="p">,</span>
            <span class="n">WATER_FVF_COL</span><span class="p">,</span>
            <span class="n">RS_W_COL</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">swo</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">cw</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">cf</span><span class="p">,</span>
            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_bo_at_press</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">)),</span>
            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_bg_at_press</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">)),</span>
            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_bo_at_press</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">)),</span>
            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_rs_at_press</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">)),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">mbal_final_per_tank</span> <span class="o">=</span> <span class="n">mbal_term</span>

        <span class="c1"># Creation of WE value according to the aquifer model</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mbal_final_per_tank</span><span class="p">[</span><span class="n">WE</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">Fetkovich</span><span class="p">):</span>
            <span class="c1"># If the aquifer instance is Fetkovich, take the pressure and -</span>
            <span class="c1"># time values that Fetkovich needs from mbal_final_per_tank</span>
            <span class="n">pr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mbal_final_per_tank</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
            <span class="n">time_step</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mbal_final_per_tank</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">_set_pr_and_time_step</span><span class="p">(</span><span class="n">pr</span><span class="p">,</span> <span class="n">time_step</span><span class="p">)</span>
            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">we</span><span class="p">()</span>
            <span class="n">mbal_final_per_tank</span> <span class="o">=</span> <span class="n">mbal_final_per_tank</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Cumulative We&quot;</span><span class="p">])</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">CarterTracy</span><span class="p">):</span>
            <span class="c1"># If the aquifer instance is Fetkovich, take the pressure and -</span>
            <span class="c1"># time values that Fetkovich needs from mbal_final_per_tank</span>
            <span class="n">pr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mbal_final_per_tank</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
            <span class="n">time_step</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mbal_final_per_tank</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">_set_pr_and_time_step</span><span class="p">(</span><span class="n">pr</span><span class="p">,</span> <span class="n">time_step</span><span class="p">)</span>
            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">we</span><span class="p">()</span>
            <span class="n">mbal_final_per_tank</span> <span class="o">=</span> <span class="n">mbal_final_per_tank</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Cumulative We&quot;</span><span class="p">])</span>

        <span class="c1"># final mbal DataFrame</span>
        <span class="k">return</span> <span class="n">mbal_final_per_tank</span>

    <span class="c1"># ---------------------- CAMPBELL GRAPH --------------------------------</span>
    <span class="k">def</span> <span class="nf">campbell_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">custom_line</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                      <span class="n">x1</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">y1</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">x2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">y2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to graphic the Campbell graph to be able to graphically see</span>
<span class="sd">        the energy contribution of the aquifer.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -------</span>
<span class="sd">        custom_line (bool) : It can be False if you do not want to draw a line</span>
<span class="sd">        with selected points. In case if it can be True</span>
<span class="sd">        x1 (float) : The x coordinate of the first point</span>
<span class="sd">        y1 (float) : The y coordinate of the first point</span>
<span class="sd">        x2 (float) : The x coordinate of the second point</span>
<span class="sd">        y2 (float) : The y coordinate of the second point</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        plt.Figure: A matplotlib Figure object containing the plot with the</span>
<span class="sd">        data selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mbal_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">UW_COL</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_EXP</span><span class="p">]</span> <span class="o">+</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">RES_EXP</span><span class="p">])</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Np&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;F/Eo+Efw&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="c1"># Graph</span>
        <span class="k">if</span> <span class="n">custom_line</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">se</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Np&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;F/Eo+Efw&quot;</span><span class="p">])</span>
            <span class="n">reg_line</span> <span class="o">=</span> <span class="p">(</span><span class="n">slope</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Np&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="n">intercept</span>
            <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Np&quot;</span><span class="p">],</span>
                     <span class="n">reg_line</span><span class="p">,</span>
                     <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
                     <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Regression line&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">slope</span> <span class="o">=</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span>
            <span class="n">intercept</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">x1</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Np&quot;</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Np&quot;</span><span class="p">]),</span> <span class="mi">100</span><span class="p">)</span>
            <span class="n">y_values</span> <span class="o">=</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">x_values</span> <span class="o">+</span> <span class="n">intercept</span>
            <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span><span class="p">,</span>
                     <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
                     <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Custom Line&quot;</span><span class="p">)</span>

        <span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Np Cumulative Oil Production [MMStb]&quot;</span><span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;F/Eo+Efw&quot;</span><span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Campbell plot of &quot;</span> <span class="o">+</span>
                      <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span>
                          <span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)))</span>
        <span class="n">textstr</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;Graph that gives an &quot;</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">idea of the energy &quot;</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">contribution of an aquifer&quot;</span>
        <span class="p">)</span>
        <span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
            <span class="mf">0.05</span><span class="p">,</span>
            <span class="mf">0.95</span><span class="p">,</span>
            <span class="n">textstr</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="n">ax1</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="n">bbox</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="n">formattery</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">KM&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-9</span><span class="p">))</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formattery</span><span class="p">)</span>

        <span class="n">formatterx</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatterx</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">campbell_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to give the Campbell data..</span>
<span class="sd">        :return:</span>
<span class="sd">        pd.DataFrame: A pandas DataFrame containing the data with Np and</span>
<span class="sd">        F/Eo+Efw columns.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mbal_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">UW_COL</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_EXP</span><span class="p">]</span> <span class="o">+</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">RES_EXP</span><span class="p">])</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Np&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;F/Eo+Efw&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="c1"># ------------------ HAVLENA AND ODEH METHOD ----------------------------</span>
    <span class="k">def</span> <span class="nf">havlena_odeh_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                          <span class="n">custom_line</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                          <span class="n">x1</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">y1</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">x2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">y2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate results based on Havlena and Odeh Methods and show a graphic.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -------</span>
<span class="sd">        custom_line (bool) : It can be False if you do not want to draw a line</span>
<span class="sd">        with selected points. In case if it can be True</span>
<span class="sd">        x1 (float) : The x coordinate of the first point</span>
<span class="sd">        y1 (float) : The y coordinate of the first point</span>
<span class="sd">        x2 (float) : The x coordinate of the second point</span>
<span class="sd">        y2 (float) : The y coordinate of the second point</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        plt.Figure: A graph F - WE vs Et</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name_aquifer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># Creation of WE value according to the aquifer model</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name_aquifer</span> <span class="o">=</span> <span class="s2">&quot; without Aquifer&quot;</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">Fetkovich</span><span class="p">):</span>
            <span class="n">name_aquifer</span> <span class="o">=</span> <span class="s2">&quot; with Fetkovich Aquifer Model&quot;</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">CarterTracy</span><span class="p">):</span>
            <span class="n">name_aquifer</span> <span class="o">=</span> <span class="s2">&quot; with Carter Tracy Aquifer Model&quot;</span>

        <span class="c1"># Data Processing</span>
        <span class="n">mbal_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">UW_COL</span><span class="p">]</span> <span class="o">-</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">WE</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_EXP</span><span class="p">]</span> <span class="o">+</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">RES_EXP</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;F-We&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;F-We&quot;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>

        <span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">se</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">],</span>
                                                      <span class="n">data</span><span class="p">[</span><span class="s2">&quot;F-We&quot;</span><span class="p">])</span>

        <span class="c1"># Graphic</span>
        <span class="c1"># Without points selected</span>
        <span class="k">if</span> <span class="n">custom_line</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">reg_line</span> <span class="o">=</span> <span class="p">(</span><span class="n">slope</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="n">intercept</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">],</span>
                     <span class="n">reg_line</span><span class="p">,</span>
                     <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
                     <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Regression line&quot;</span><span class="p">)</span>
            <span class="c1"># Text in the graph</span>
            <span class="n">textstr</span> <span class="o">=</span> <span class="s2">&quot;N [MMStb]: </span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">slope</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">)</span>
            <span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
                <span class="mf">0.05</span><span class="p">,</span>
                <span class="mf">0.95</span><span class="p">,</span>
                <span class="n">textstr</span><span class="p">,</span>
                <span class="n">transform</span><span class="o">=</span><span class="n">ax2</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
                <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">verticalalignment</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span>
                <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
                <span class="n">bbox</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">)</span>

        <span class="c1"># With points selected</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">slope</span> <span class="o">=</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span>
            <span class="n">intercept</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">x1</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">]),</span>
                                   <span class="mi">100</span><span class="p">)</span>
            <span class="n">y_values</span> <span class="o">=</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">x_values</span> <span class="o">+</span> <span class="n">intercept</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span><span class="p">,</span>
                     <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
                     <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Custom Line&quot;</span><span class="p">)</span>
            <span class="c1"># Text in the graph</span>
            <span class="n">textstr</span> <span class="o">=</span> <span class="s2">&quot;N [MMStb]: </span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">slope</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">)</span>
            <span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
                <span class="mf">0.05</span><span class="p">,</span>
                <span class="mf">0.95</span><span class="p">,</span>
                <span class="n">textstr</span><span class="p">,</span>
                <span class="n">transform</span><span class="o">=</span><span class="n">ax2</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
                <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">verticalalignment</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span>
                <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
                <span class="n">bbox</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">)</span>

        <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;F-We&quot;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Havlena y Odeh plot of &quot;</span> <span class="o">+</span>
                      <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span>
                          <span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">))</span> <span class="o">+</span> <span class="n">name_aquifer</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="c1"># formatter for the axes in M</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.2f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">havlena_oded_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate values based on Havlena and Odeh Methods and show a df.</span>
<span class="sd">        :return:</span>
<span class="sd">        pd.Dataframe: DataFrame with F-We and Eo+Efw columns.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mbal_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">UW_COL</span><span class="p">]</span> <span class="o">-</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">WE</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_EXP</span><span class="p">]</span> <span class="o">+</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">RES_EXP</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;F-We&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="c1"># ----------------------- ANALYTIC METHOD -------------------------------</span>
    <span class="k">def</span> <span class="nf">analytic_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poes</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                        <span class="n">option</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method used to calculate the POES through an inferred POES that</span>
<span class="sd">        ensures that there is the best match between the behavior of the</span>
<span class="sd">        observed pressure and the calculated pressure. the calculation is</span>
<span class="sd">        done through calculated_pressure_fetkovich and calculated_pressure_</span>
<span class="sd">        carter_tracy functions.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        poes : float</span>
<span class="sd">            Inferred POES (Petroleum-in-Place) value in MMStb.</span>
<span class="sd">        option : str</span>
<span class="sd">            Determines the type of result to be returned. Can be either</span>
<span class="sd">            &quot;data&quot; or &quot;plot&quot;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame, plt.Figure]</span>
<span class="sd">            - If option is &quot;data&quot;, returns a pandas DataFrame containing the</span>
<span class="sd">             Date, Observed Pressure and Calculated Pressure.</span>
<span class="sd">            - If option is &quot;plot&quot;, returns a matplotlib Figure object</span>
<span class="sd">            containing a plot of the observed and calculated pressure over</span>
<span class="sd">            time.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the option is not &quot;data&quot; or &quot;plot&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Encapsulation of material balance DataFrame from mat_bal_df() method</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
        <span class="n">press_calc</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># name of aquifer model:</span>
        <span class="n">model_aq_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># Fetkovich Aquifer Model</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">Fetkovich</span><span class="p">):</span>
            <span class="n">model_aq_name</span> <span class="o">=</span> <span class="s2">&quot;Fetkovich Aquifer Model&quot;</span>
            <span class="c1"># Call the function to calculate the new pressure</span>
            <span class="n">press_calc</span> <span class="o">=</span> <span class="n">calculated_pressure_fetkovich</span><span class="p">(</span>
                <span class="n">df</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">],</span>
                <span class="n">df</span><span class="p">[</span><span class="n">WATER_CUM_TANK</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">cf</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">salinity</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">data_pvt</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_radius</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">res_radius</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_thickness</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_por</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">k</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">water_visc</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">swo</span><span class="p">,</span>
                <span class="n">poes</span><span class="p">,</span>
                <span class="n">PRESSURE_PVT_COL</span><span class="p">,</span>
                <span class="n">OIL_FVF_COL</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Carter Tracy Aquifer Model</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">CarterTracy</span><span class="p">):</span>
            <span class="n">model_aq_name</span> <span class="o">=</span> <span class="s2">&quot;Carter Tracy Aquifer Model&quot;</span>
            <span class="n">press_calc</span> <span class="o">=</span> <span class="n">calculate_pressure_with_carter_tracy</span><span class="p">(</span>
                <span class="n">df</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">],</span>
                <span class="n">df</span><span class="p">[</span><span class="n">WATER_CUM_TANK</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">cf</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">salinity</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">data_pvt</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">res_radius</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_thickness</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_por</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_perm</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">water_visc</span><span class="p">,</span>
                <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">swo</span><span class="p">,</span>
                <span class="n">poes</span><span class="p">,</span>
                <span class="n">PRESSURE_PVT_COL</span><span class="p">,</span>
                <span class="n">OIL_FVF_COL</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Aad the first date to initial pressure</span>
        <span class="n">dates</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="n">DATE_COL</span><span class="p">,</span> <span class="n">PRESSURE_COL</span><span class="p">]]</span>
        <span class="n">new_date</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">)</span>
        <span class="n">n_row</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">DATE_COL</span><span class="p">:</span> <span class="n">new_date</span><span class="p">},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">n_row</span><span class="p">,</span> <span class="n">dates</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">PRESSURE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span>

        <span class="c1"># Add the Calculated Pressure column</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;PRESS_CALC&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">press_calc</span>

        <span class="k">if</span> <span class="n">option</span> <span class="o">==</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span><span class="p">[[</span><span class="n">DATE_COL</span><span class="p">,</span> <span class="n">PRESSURE_COL</span><span class="p">,</span> <span class="s2">&quot;PRESS_CALC&quot;</span><span class="p">]]</span>

        <span class="k">elif</span> <span class="n">option</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
            <span class="n">fig8</span><span class="p">,</span> <span class="n">ax8</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
            <span class="n">ax8</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
                        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Observed Pressure&quot;</span><span class="p">)</span>
            <span class="n">ax8</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span>
                     <span class="n">press_calc</span><span class="p">,</span>
                     <span class="n">c</span><span class="o">=</span><span class="s2">&quot;g&quot;</span><span class="p">,</span>
                     <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Calculated Pressure&quot;</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pressure vs Time with </span><span class="si">{</span><span class="n">model_aq_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                      <span class="n">fontsize</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time (Years)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Pressure (PSI)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>
            <span class="n">ax8</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4000</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
            <span class="n">ax8</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
            <span class="n">fig8</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;ANALYTIC METHOD&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">fig8</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Option no validate. Use &#39;data&#39; or &#39;plot&#39;.&quot;</span><span class="p">)</span>

    <span class="c1"># The following methods are to do an exploratory data analysis -</span>
    <span class="c1"># (EDA) of the Tank:</span>
    <span class="c1"># ---------------------- GRAPH SECTION ----------------------------</span>
    <span class="k">def</span> <span class="nf">plot_cum_prod_well</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to generate a graph.</span>
<span class="sd">        :return:</span>
<span class="sd">        plt.Figure: Graph of Cumulative Production per Well of Tank.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Production Data</span>
        <span class="n">df_prod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">get_production_df</span><span class="p">()</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
        <span class="n">df_prod</span> <span class="o">=</span> <span class="n">df_prod</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">DATE_COL</span><span class="p">)</span>
        <span class="c1"># Well Group</span>
        <span class="n">df_prod_well</span> <span class="o">=</span> <span class="n">df_prod</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">WELL_COL</span><span class="p">)[[</span><span class="n">OIL_CUM_COL</span><span class="p">,</span>
                                                  <span class="n">WATER_CUM_COL</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">well_ind</span> <span class="o">=</span> <span class="n">df_prod_well</span><span class="o">.</span><span class="n">index</span>
        <span class="n">bar_witd</span> <span class="o">=</span> <span class="mf">0.35</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">well_ind</span><span class="p">))</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="n">bar_witd</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">]</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
            <span class="n">r1</span><span class="p">,</span>
            <span class="n">df_prod_well</span><span class="p">[</span><span class="n">OIL_CUM_COL</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="n">bar_witd</span><span class="p">,</span>
            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Oil Cumulative&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
            <span class="n">r2</span><span class="p">,</span>
            <span class="n">df_prod_well</span><span class="p">[</span><span class="n">WATER_CUM_COL</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="n">bar_witd</span><span class="p">,</span>
            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Water Cumulative&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Cumulative Production per Well - &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Well&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Production [Stb]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="n">r</span> <span class="o">+</span> <span class="n">bar_witd</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">well_ind</span><span class="p">))])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span>
            <span class="n">well_ind</span><span class="p">,</span>
            <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">FontProperties</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mf">8.5</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="c1"># formatter for the axes in M</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">plot_flow_rate_well</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to generate a graph.</span>
<span class="sd">        :return:</span>
<span class="sd">        plt.Figure: A graph of Flow Rate vs Time per Rate of Tank.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Production Data</span>
        <span class="n">df_prod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">get_production_df</span><span class="p">()</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
        <span class="n">df_prod</span> <span class="o">=</span> <span class="n">df_prod</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">DATE_COL</span><span class="p">)</span>

        <span class="c1"># days</span>
        <span class="c1"># df_prod[&quot;Days&quot;] = df_prod[DATE_COL].diff().dt.days.fillna(0)</span>
        <span class="c1"># df_prod.loc[df_prod[&quot;Days&quot;] == 0, &quot;Days&quot;] = 365</span>

        <span class="c1"># Calculate daily production rates from cumulative productions.</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">OIL_RATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_prod</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
            <span class="n">WELL_COL</span><span class="p">)[</span><span class="n">OIL_CUM_COL</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">WATER_RATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">df_prod</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">WELL_COL</span><span class="p">)[</span><span class="n">WATER_CUM_COL</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

        <span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">wells</span> <span class="o">=</span> <span class="n">df_prod</span><span class="p">[</span><span class="n">WELL_COL</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;tab10&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">wells</span><span class="p">))</span>

        <span class="c1"># Plot of Oil Flow Rate</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">well</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">wells</span><span class="p">):</span>
            <span class="n">well_data</span> <span class="o">=</span> <span class="n">df_prod</span><span class="p">[</span><span class="n">df_prod</span><span class="p">[</span><span class="n">WELL_COL</span><span class="p">]</span> <span class="o">==</span> <span class="n">well</span><span class="p">]</span>
            <span class="n">dates</span> <span class="o">=</span> <span class="n">well_data</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span>

            <span class="c1"># Oil rate</span>
            <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span>
                     <span class="n">well_data</span><span class="p">[</span><span class="n">OIL_RATE_COL</span><span class="p">],</span>
                     <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">well</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                     <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
                <span class="s2">&quot;Oil Flow Rate vs Time by Well - &quot;</span> <span class="o">+</span>
                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span>
                    <span class="n">upper</span><span class="p">()),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Flow Rate [Stb/year]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
            <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
            <span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

            <span class="c1"># Water rate</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span>
                     <span class="n">well_data</span><span class="p">[</span><span class="n">WATER_RATE_COL</span><span class="p">],</span>
                     <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">well</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                     <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
                <span class="s2">&quot;Water Flow Rate vs Time by Well - &quot;</span> <span class="o">+</span>
                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span>
                    <span class="n">upper</span><span class="p">()),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Flow Rate [Stb/year]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
            <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

        <span class="c1"># Set Y-axis limit&#39;</span>
        <span class="n">y_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">df_prod</span><span class="p">[</span><span class="n">OIL_RATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">df_prod</span><span class="p">[</span><span class="n">WATER_RATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
        <span class="n">y_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_max</span> <span class="o">//</span> <span class="mi">20000</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">20000</span>

        <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_max</span><span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20000</span><span class="p">))</span>

        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_max</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20000</span><span class="p">))</span>

        <span class="c1"># formatter for the axes in K</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">K&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-3</span><span class="p">))</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

        <span class="c1"># formatter for the axes in K</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">K&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-3</span><span class="p">))</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig</span>

    <span class="k">def</span> <span class="nf">plot_cum_prod_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to generate a graph.</span>
<span class="sd">        :return:</span>
<span class="sd">        plt.Figure: Graph of Oil and Water Cumulative Production vs Time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Average Pressure Data</span>
        <span class="n">df_press_avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
        <span class="n">fig1</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">,</span> <span class="n">WATER_CUM_TANK</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
            <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
                     <span class="n">df_press_avg</span><span class="p">[</span><span class="n">col</span><span class="p">],</span>
                     <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                     <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

        <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Cumulative Production per Date - &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Production [MMStb]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="c1"># formatter for the axes in M</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig1</span>

    <span class="k">def</span> <span class="nf">plot_cum_prod_tot_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to generate a graph.</span>
<span class="sd">        :return:</span>
<span class="sd">        plt.Figure: Graph of Total Liquid Cumulative Production vs Time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Average Pressure Data</span>
        <span class="n">df_press_avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>

        <span class="n">fig2</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="s2">&quot;skyblue&quot;</span>
        <span class="n">total_liquid</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">]</span> <span class="o">+</span>
                        <span class="n">df_press_avg</span><span class="p">[</span><span class="n">WATER_CUM_TANK</span><span class="p">])</span>

        <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
                 <span class="n">total_liquid</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Total Liquid&quot;</span><span class="p">)</span>

        <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Cumulative Total Liquid Production per Date - &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Production [MMStb]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="c1"># formatter for the axes in M</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig2</span>

    <span class="k">def</span> <span class="nf">plot_press_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to generate a graph.</span>
<span class="sd">        :return:</span>
<span class="sd">        plt.Figure: Graph of normal Pressure vs Time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Pressure Data</span>
        <span class="n">df_press</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">get_pressure_df</span><span class="p">()</span>
        <span class="n">df_press</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_press</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
        <span class="n">df_press</span> <span class="o">=</span> <span class="n">df_press</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">DATE_COL</span><span class="p">)</span>

        <span class="n">fig3</span><span class="p">,</span> <span class="n">ax3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;green&quot;</span>

        <span class="n">ax3</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df_press</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
                    <span class="n">df_press</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Pressure&quot;</span><span class="p">)</span>

        <span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Pressure per Date - &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="n">df_press</span><span class="p">[</span><span class="n">TANK_COL</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax3</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax3</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Pressure [PSI]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax3</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig3</span>

    <span class="k">def</span> <span class="nf">plot_press_avg_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to generate a graph.</span>
<span class="sd">        :return:</span>
<span class="sd">        plt.Figure: Graph of Average Pressure vs Time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Average Pressure Data</span>
        <span class="n">df_press_avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
        <span class="n">fig4</span><span class="p">,</span> <span class="n">ax4</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;red&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">smooth</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">ax4</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
                <span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
                <span class="n">df_press_avg</span><span class="p">[</span><span class="s2">&quot;AVG_PRESS&quot;</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot; Avg Pressure&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">ax4</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
                <span class="n">df_press_avg</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Avg Pressure (Smoothed)&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ax4</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
                <span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
                <span class="n">df_press_avg</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot; Avg Pressure&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">ax4</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Pressure per Date - &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax4</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax4</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Average Pressure[PSI]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax4</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig4</span>

    <span class="k">def</span> <span class="nf">plot_press_liq_cum</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to generate a graph.</span>
<span class="sd">        :return:</span>
<span class="sd">        plt.Figure: Graph of Pressure vs Cumulative Liquids (Oil and Water).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Pressure date with Cumulative Production</span>
        <span class="n">df_press_cum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_uw</span><span class="p">()</span>
        <span class="n">df_press_cum</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_press_cum</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
        <span class="n">df_press_cum</span> <span class="o">=</span> <span class="n">df_press_cum</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">PRESSURE_COL</span><span class="p">)</span>

        <span class="n">fig6</span><span class="p">,</span> <span class="n">ax6</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">OIL_CUM_COL</span><span class="p">,</span> <span class="n">WATER_CUM_COL</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
            <span class="n">ax6</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
                <span class="n">df_press_cum</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
                <span class="n">df_press_cum</span><span class="p">[</span><span class="n">col</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">ax6</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Pressure vs Cumulative Production - &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax6</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Pressure&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax6</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Production&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax6</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="c1"># formatter for the axes in M</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
        <span class="n">ax6</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig6</span>

    <span class="k">def</span> <span class="nf">plot_press_avg_liq_cum</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to generate a graph.</span>
<span class="sd">        :return:</span>
<span class="sd">        Graph of Average Pressure vs Cumulative Liquids (Oil and Water).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Average Pressure Data</span>
        <span class="n">df_press_avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
        <span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
        <span class="n">df_press_avg</span> <span class="o">=</span> <span class="n">df_press_avg</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">PRESSURE_COL</span><span class="p">)</span>
        <span class="n">fig7</span><span class="p">,</span> <span class="n">ax7</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">,</span> <span class="n">WATER_CUM_TANK</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
            <span class="n">ax7</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
                <span class="n">df_press_avg</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
                <span class="n">df_press_avg</span><span class="p">[</span><span class="n">col</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">ax7</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Average Pressure vs Cumulative Production - &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax7</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Average Pressure&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax7</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Production&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax7</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="c1"># formatter for the axes in M</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
        <span class="n">ax7</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig7</span>

    <span class="k">def</span> <span class="nf">plot_flow_rate_tank</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to generate a graph.</span>
<span class="sd">        :return:</span>
<span class="sd">        plt.Figure: A graph of Flow Rate vs Time by Tank.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Production Data</span>
        <span class="c1"># Average Pressure Data</span>
        <span class="n">df_prod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
        <span class="n">df_prod</span> <span class="o">=</span> <span class="n">df_prod</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">DATE_COL</span><span class="p">)</span>

        <span class="c1"># Days</span>
        <span class="c1"># df_prod[&quot;Days&quot;] = df_prod[DATE_COL].diff().dt.days.fillna(0)</span>
        <span class="c1"># df_prod.loc[df_prod[&quot;Days&quot;] == 0, &quot;Days&quot;] = 365</span>

        <span class="c1"># Calculate daily production rates from cumulative productions.</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">OIL_RATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_prod</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">WATER_RATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_prod</span><span class="p">[</span><span class="n">WATER_CUM_TANK</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Oil rate</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
            <span class="n">df_prod</span><span class="p">[</span><span class="n">OIL_RATE_COL</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Oil flow Rate&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Oil Flow Rate vs Time by &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Flow Rate [Stb/year]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="c1"># Water rate</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
            <span class="n">df_prod</span><span class="p">[</span><span class="n">WATER_RATE_COL</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Water flow rate&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Water Flow Rate vs Time by &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Flow Rate [Stb/year]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="c1"># formatter for the axes in K</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">K&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-3</span><span class="p">))</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

        <span class="c1"># formatter for the axes in K</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">K&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-3</span><span class="p">))</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

        <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">tank_class</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mf">1000000.0</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <h5 id="pytank.analysis.Analysis.__init__--parameters">Parameters</h5>
<p>tank_class : Tank
    Instance of the Tank class.
freq : str
    Frequency of data for the material balance equation.
position : str
    Position of the frequency of the date.
smooth : bool, optional
    Determines if the user wants to adjust the data. Default is False.
k : int, optional
    Degree of the cubic spline. Default is 3.
s : float, optional
    Smoothing factor. Default is 10e6.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tank_class</span><span class="p">,</span>
             <span class="n">freq</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
             <span class="n">position</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
             <span class="n">smooth</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
             <span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
             <span class="n">s</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10e5</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    tank_class : Tank</span>
<span class="sd">        Instance of the Tank class.</span>
<span class="sd">    freq : str</span>
<span class="sd">        Frequency of data for the material balance equation.</span>
<span class="sd">    position : str</span>
<span class="sd">        Position of the frequency of the date.</span>
<span class="sd">    smooth : bool, optional</span>
<span class="sd">        Determines if the user wants to adjust the data. Default is False.</span>
<span class="sd">    k : int, optional</span>
<span class="sd">        Degree of the cubic spline. Default is 3.</span>
<span class="sd">    s : float, optional</span>
<span class="sd">        Smoothing factor. Default is 10e6.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">tank_class</span><span class="o">=</span><span class="n">tank_class</span><span class="p">,</span>
                     <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span>
                     <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
                     <span class="n">smooth</span><span class="o">=</span><span class="n">smooth</span><span class="p">,</span>
                     <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
                     <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.analytic_method" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">analytic_method</span><span class="p">(</span><span class="n">poes</span><span class="p">,</span> <span class="n">option</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method used to calculate the POES through an inferred POES that
ensures that there is the best match between the behavior of the
observed pressure and the calculated pressure. the calculation is
done through calculated_pressure_fetkovich and calculated_pressure_
carter_tracy functions.</p>
<h5 id="pytank.analysis.Analysis.analytic_method--parameters">Parameters</h5>
<p>poes : float
    Inferred POES (Petroleum-in-Place) value in MMStb.
option : str
    Determines the type of result to be returned. Can be either
    "data" or "plot".</p>
<h5 id="pytank.analysis.Analysis.analytic_method--returns">Returns</h5>
<p>Union[pd.DataFrame, plt.Figure]
    - If option is "data", returns a pandas DataFrame containing the
     Date, Observed Pressure and Calculated Pressure.
    - If option is "plot", returns a matplotlib Figure object
    containing a plot of the observed and calculated pressure over
    time.</p>
<h5 id="pytank.analysis.Analysis.analytic_method--raises">Raises</h5>
<p>ValueError
    If the option is not "data" or "plot".</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">analytic_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poes</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                    <span class="n">option</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method used to calculate the POES through an inferred POES that</span>
<span class="sd">    ensures that there is the best match between the behavior of the</span>
<span class="sd">    observed pressure and the calculated pressure. the calculation is</span>
<span class="sd">    done through calculated_pressure_fetkovich and calculated_pressure_</span>
<span class="sd">    carter_tracy functions.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    poes : float</span>
<span class="sd">        Inferred POES (Petroleum-in-Place) value in MMStb.</span>
<span class="sd">    option : str</span>
<span class="sd">        Determines the type of result to be returned. Can be either</span>
<span class="sd">        &quot;data&quot; or &quot;plot&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Union[pd.DataFrame, plt.Figure]</span>
<span class="sd">        - If option is &quot;data&quot;, returns a pandas DataFrame containing the</span>
<span class="sd">         Date, Observed Pressure and Calculated Pressure.</span>
<span class="sd">        - If option is &quot;plot&quot;, returns a matplotlib Figure object</span>
<span class="sd">        containing a plot of the observed and calculated pressure over</span>
<span class="sd">        time.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the option is not &quot;data&quot; or &quot;plot&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Encapsulation of material balance DataFrame from mat_bal_df() method</span>
    <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
    <span class="n">press_calc</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># name of aquifer model:</span>
    <span class="n">model_aq_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="c1"># Fetkovich Aquifer Model</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">Fetkovich</span><span class="p">):</span>
        <span class="n">model_aq_name</span> <span class="o">=</span> <span class="s2">&quot;Fetkovich Aquifer Model&quot;</span>
        <span class="c1"># Call the function to calculate the new pressure</span>
        <span class="n">press_calc</span> <span class="o">=</span> <span class="n">calculated_pressure_fetkovich</span><span class="p">(</span>
            <span class="n">df</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="n">WATER_CUM_TANK</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">cf</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">salinity</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">data_pvt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_radius</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">res_radius</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_thickness</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_por</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">k</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">water_visc</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">swo</span><span class="p">,</span>
            <span class="n">poes</span><span class="p">,</span>
            <span class="n">PRESSURE_PVT_COL</span><span class="p">,</span>
            <span class="n">OIL_FVF_COL</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Carter Tracy Aquifer Model</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">CarterTracy</span><span class="p">):</span>
        <span class="n">model_aq_name</span> <span class="o">=</span> <span class="s2">&quot;Carter Tracy Aquifer Model&quot;</span>
        <span class="n">press_calc</span> <span class="o">=</span> <span class="n">calculate_pressure_with_carter_tracy</span><span class="p">(</span>
            <span class="n">df</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">],</span>
            <span class="n">df</span><span class="p">[</span><span class="n">WATER_CUM_TANK</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">cf</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">salinity</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">data_pvt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">res_radius</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_thickness</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_por</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">aq_perm</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">water_visc</span><span class="p">,</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">swo</span><span class="p">,</span>
            <span class="n">poes</span><span class="p">,</span>
            <span class="n">PRESSURE_PVT_COL</span><span class="p">,</span>
            <span class="n">OIL_FVF_COL</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Aad the first date to initial pressure</span>
    <span class="n">dates</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="n">DATE_COL</span><span class="p">,</span> <span class="n">PRESSURE_COL</span><span class="p">]]</span>
    <span class="n">new_date</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">)</span>
    <span class="n">n_row</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">DATE_COL</span><span class="p">:</span> <span class="n">new_date</span><span class="p">},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">n_row</span><span class="p">,</span> <span class="n">dates</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">PRESSURE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span>

    <span class="c1"># Add the Calculated Pressure column</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;PRESS_CALC&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">press_calc</span>

    <span class="k">if</span> <span class="n">option</span> <span class="o">==</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data</span><span class="p">[[</span><span class="n">DATE_COL</span><span class="p">,</span> <span class="n">PRESSURE_COL</span><span class="p">,</span> <span class="s2">&quot;PRESS_CALC&quot;</span><span class="p">]]</span>

    <span class="k">elif</span> <span class="n">option</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
        <span class="n">fig8</span><span class="p">,</span> <span class="n">ax8</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
        <span class="n">ax8</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span>
                    <span class="n">data</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
                    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Observed Pressure&quot;</span><span class="p">)</span>
        <span class="n">ax8</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span>
                 <span class="n">press_calc</span><span class="p">,</span>
                 <span class="n">c</span><span class="o">=</span><span class="s2">&quot;g&quot;</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Calculated Pressure&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pressure vs Time with </span><span class="si">{</span><span class="n">model_aq_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                  <span class="n">fontsize</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time (Years)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Pressure (PSI)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>
        <span class="n">ax8</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4000</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        <span class="n">ax8</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;lightgray&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
        <span class="n">fig8</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;ANALYTIC METHOD&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fig8</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Option no validate. Use &#39;data&#39; or &#39;plot&#39;.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.campbell_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">campbell_data</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to give the Campbell data..
:return:
pd.DataFrame: A pandas DataFrame containing the data with Np and
F/Eo+Efw columns.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">campbell_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to give the Campbell data..</span>
<span class="sd">    :return:</span>
<span class="sd">    pd.DataFrame: A pandas DataFrame containing the data with Np and</span>
<span class="sd">    F/Eo+Efw columns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mbal_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">UW_COL</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_EXP</span><span class="p">]</span> <span class="o">+</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">RES_EXP</span><span class="p">])</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Np&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;F/Eo+Efw&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.campbell_plot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">campbell_plot</span><span class="p">(</span><span class="n">custom_line</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">x1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y2</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to graphic the Campbell graph to be able to graphically see
the energy contribution of the aquifer.</p>
<h5 id="pytank.analysis.Analysis.campbell_plot--parameters">Parameters</h5>
<p>custom_line (bool) : It can be False if you do not want to draw a line
with selected points. In case if it can be True
x1 (float) : The x coordinate of the first point
y1 (float) : The y coordinate of the first point
x2 (float) : The x coordinate of the second point
y2 (float) : The y coordinate of the second point</p>
<h5 id="pytank.analysis.Analysis.campbell_plot--returns">Returns</h5>
<p>plt.Figure: A matplotlib Figure object containing the plot with the
data selected.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">campbell_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                  <span class="n">custom_line</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                  <span class="n">x1</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">y1</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">x2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">y2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to graphic the Campbell graph to be able to graphically see</span>
<span class="sd">    the energy contribution of the aquifer.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -------</span>
<span class="sd">    custom_line (bool) : It can be False if you do not want to draw a line</span>
<span class="sd">    with selected points. In case if it can be True</span>
<span class="sd">    x1 (float) : The x coordinate of the first point</span>
<span class="sd">    y1 (float) : The y coordinate of the first point</span>
<span class="sd">    x2 (float) : The x coordinate of the second point</span>
<span class="sd">    y2 (float) : The y coordinate of the second point</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    plt.Figure: A matplotlib Figure object containing the plot with the</span>
<span class="sd">    data selected.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mbal_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">UW_COL</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_EXP</span><span class="p">]</span> <span class="o">+</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">RES_EXP</span><span class="p">])</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Np&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;F/Eo+Efw&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="c1"># Graph</span>
    <span class="k">if</span> <span class="n">custom_line</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">se</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Np&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;F/Eo+Efw&quot;</span><span class="p">])</span>
        <span class="n">reg_line</span> <span class="o">=</span> <span class="p">(</span><span class="n">slope</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Np&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="n">intercept</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Np&quot;</span><span class="p">],</span>
                 <span class="n">reg_line</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Regression line&quot;</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">slope</span> <span class="o">=</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span>
        <span class="n">intercept</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">x1</span>
        <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Np&quot;</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Np&quot;</span><span class="p">]),</span> <span class="mi">100</span><span class="p">)</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">x_values</span> <span class="o">+</span> <span class="n">intercept</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Custom Line&quot;</span><span class="p">)</span>

    <span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Np Cumulative Oil Production [MMStb]&quot;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;F/Eo+Efw&quot;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Campbell plot of &quot;</span> <span class="o">+</span>
                  <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span>
                      <span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)))</span>
    <span class="n">textstr</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;Graph that gives an &quot;</span>
        <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">idea of the energy &quot;</span>
        <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">contribution of an aquifer&quot;</span>
    <span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
        <span class="mf">0.05</span><span class="p">,</span>
        <span class="mf">0.95</span><span class="p">,</span>
        <span class="n">textstr</span><span class="p">,</span>
        <span class="n">transform</span><span class="o">=</span><span class="n">ax1</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
        <span class="n">verticalalignment</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span>
        <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
        <span class="n">bbox</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="n">formattery</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">KM&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-9</span><span class="p">))</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formattery</span><span class="p">)</span>

    <span class="n">formatterx</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatterx</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.havlena_oded_data" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">havlena_oded_data</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Calculate values based on Havlena and Odeh Methods and show a df.
:return:
pd.Dataframe: DataFrame with F-We and Eo+Efw columns.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">havlena_oded_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate values based on Havlena and Odeh Methods and show a df.</span>
<span class="sd">    :return:</span>
<span class="sd">    pd.Dataframe: DataFrame with F-We and Eo+Efw columns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mbal_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">UW_COL</span><span class="p">]</span> <span class="o">-</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">WE</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_EXP</span><span class="p">]</span> <span class="o">+</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">RES_EXP</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;F-We&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.havlena_odeh_plot" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">havlena_odeh_plot</span><span class="p">(</span><span class="n">custom_line</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">x1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y2</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Calculate results based on Havlena and Odeh Methods and show a graphic.</p>
<h5 id="pytank.analysis.Analysis.havlena_odeh_plot--parameters">Parameters</h5>
<p>custom_line (bool) : It can be False if you do not want to draw a line
with selected points. In case if it can be True
x1 (float) : The x coordinate of the first point
y1 (float) : The y coordinate of the first point
x2 (float) : The x coordinate of the second point
y2 (float) : The y coordinate of the second point</p>
<h5 id="pytank.analysis.Analysis.havlena_odeh_plot--returns">Returns</h5>
<p>plt.Figure: A graph F - WE vs Et</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">havlena_odeh_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">custom_line</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                      <span class="n">x1</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">y1</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">x2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">y2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate results based on Havlena and Odeh Methods and show a graphic.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -------</span>
<span class="sd">    custom_line (bool) : It can be False if you do not want to draw a line</span>
<span class="sd">    with selected points. In case if it can be True</span>
<span class="sd">    x1 (float) : The x coordinate of the first point</span>
<span class="sd">    y1 (float) : The y coordinate of the first point</span>
<span class="sd">    x2 (float) : The x coordinate of the second point</span>
<span class="sd">    y2 (float) : The y coordinate of the second point</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    plt.Figure: A graph F - WE vs Et</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name_aquifer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="c1"># Creation of WE value according to the aquifer model</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name_aquifer</span> <span class="o">=</span> <span class="s2">&quot; without Aquifer&quot;</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">Fetkovich</span><span class="p">):</span>
        <span class="n">name_aquifer</span> <span class="o">=</span> <span class="s2">&quot; with Fetkovich Aquifer Model&quot;</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">CarterTracy</span><span class="p">):</span>
        <span class="n">name_aquifer</span> <span class="o">=</span> <span class="s2">&quot; with Carter Tracy Aquifer Model&quot;</span>

    <span class="c1"># Data Processing</span>
    <span class="n">mbal_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">UW_COL</span><span class="p">]</span> <span class="o">-</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">WE</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">OIL_EXP</span><span class="p">]</span> <span class="o">+</span> <span class="n">mbal_df</span><span class="p">[</span><span class="n">RES_EXP</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;F-We&quot;</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;F-We&quot;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>

    <span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">se</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">],</span>
                                                  <span class="n">data</span><span class="p">[</span><span class="s2">&quot;F-We&quot;</span><span class="p">])</span>

    <span class="c1"># Graphic</span>
    <span class="c1"># Without points selected</span>
    <span class="k">if</span> <span class="n">custom_line</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">reg_line</span> <span class="o">=</span> <span class="p">(</span><span class="n">slope</span> <span class="o">*</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="n">intercept</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">],</span>
                 <span class="n">reg_line</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Regression line&quot;</span><span class="p">)</span>
        <span class="c1"># Text in the graph</span>
        <span class="n">textstr</span> <span class="o">=</span> <span class="s2">&quot;N [MMStb]: </span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">slope</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">)</span>
        <span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
            <span class="mf">0.05</span><span class="p">,</span>
            <span class="mf">0.95</span><span class="p">,</span>
            <span class="n">textstr</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="n">ax2</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="n">bbox</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">)</span>

    <span class="c1"># With points selected</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">slope</span> <span class="o">=</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span>
        <span class="n">intercept</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">x1</span>
        <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">]),</span>
                               <span class="mi">100</span><span class="p">)</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">x_values</span> <span class="o">+</span> <span class="n">intercept</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
                 <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Custom Line&quot;</span><span class="p">)</span>
        <span class="c1"># Text in the graph</span>
        <span class="n">textstr</span> <span class="o">=</span> <span class="s2">&quot;N [MMStb]: </span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">slope</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">)</span>
        <span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
            <span class="mf">0.05</span><span class="p">,</span>
            <span class="mf">0.95</span><span class="p">,</span>
            <span class="n">textstr</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="n">ax2</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="n">bbox</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">)</span>

    <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Eo+Efw&quot;</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;F-We&quot;</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Havlena y Odeh plot of &quot;</span> <span class="o">+</span>
                  <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span>
                      <span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">))</span> <span class="o">+</span> <span class="n">name_aquifer</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="c1"># formatter for the axes in M</span>
    <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.2f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.mat_bal_df" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mat_bal_df</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Obtains the material balance parameters at a certain frequency.</p>
<h5 id="pytank.analysis.Analysis.mat_bal_df--returns">Returns</h5>
<p>pandas.DataFrame
    A DataFrame with the following columns:
    - Tank: Name of the tank.
    - START_DATETIME: Date.
    - PRESSURE_DATUM: Pressure value.
    - OIL_CUM_TANK: Oil cumulative production.
    - WATER_CUM_TANK: Water cumulative production.
    - GAS_CUM_TANK: Gas cumulative production.
    - Bo: Oil volumetric factor.
    - Bg: Gas volumetric factor.
    - GOR: Oil Solubility.
    - Bw: Water volumetric factor.
    - Rs_bw: Water Solubility.
    - Time_Step: Time lapses.
    - UW: Underground withdrawal.
    - Eo: Oil Expansion.
    - Eg: Gas Expansion.
    - Efw: Rock-fluid Expansion.
    - Cumulative We: Cumulative influx of water.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mat_bal_df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obtains the material balance parameters at a certain frequency.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pandas.DataFrame</span>
<span class="sd">        A DataFrame with the following columns:</span>
<span class="sd">        - Tank: Name of the tank.</span>
<span class="sd">        - START_DATETIME: Date.</span>
<span class="sd">        - PRESSURE_DATUM: Pressure value.</span>
<span class="sd">        - OIL_CUM_TANK: Oil cumulative production.</span>
<span class="sd">        - WATER_CUM_TANK: Water cumulative production.</span>
<span class="sd">        - GAS_CUM_TANK: Gas cumulative production.</span>
<span class="sd">        - Bo: Oil volumetric factor.</span>
<span class="sd">        - Bg: Gas volumetric factor.</span>
<span class="sd">        - GOR: Oil Solubility.</span>
<span class="sd">        - Bw: Water volumetric factor.</span>
<span class="sd">        - Rs_bw: Water Solubility.</span>
<span class="sd">        - Time_Step: Time lapses.</span>
<span class="sd">        - UW: Underground withdrawal.</span>
<span class="sd">        - Eo: Oil Expansion.</span>
<span class="sd">        - Eg: Gas Expansion.</span>
<span class="sd">        - Efw: Rock-fluid Expansion.</span>
<span class="sd">        - Cumulative We: Cumulative influx of water.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Encapsulation of DataFrame from internal private method</span>
    <span class="n">avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pressure_vol_avg</span><span class="p">()</span>

    <span class="c1">#  Validate df_prod from _prod_df_int</span>
    <span class="n">prod</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="n">_ProdSchema</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">get_production_df</span><span class="p">()))</span>

    <span class="c1"># Linear interpolated of average pressure</span>

    <span class="n">cols_input</span> <span class="o">=</span> <span class="p">[</span><span class="n">OIL_CUM_COL</span><span class="p">,</span> <span class="n">WATER_CUM_COL</span><span class="p">,</span> <span class="n">GAS_CUM_COL</span><span class="p">]</span>
    <span class="n">cols_output</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;oil_vol&quot;</span><span class="p">,</span> <span class="s2">&quot;water_vol&quot;</span><span class="p">,</span> <span class="s2">&quot;gas_vol&quot;</span><span class="p">]</span>
    <span class="n">prod</span><span class="p">[</span><span class="n">cols_output</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span>
        <span class="n">prod</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">WELL_COL</span><span class="p">)[</span><span class="n">cols_input</span><span class="p">])</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span>
        <span class="n">prod</span><span class="p">[</span><span class="n">cols_input</span><span class="p">]))</span>
    <span class="n">cols_group</span> <span class="o">=</span> <span class="p">[</span><span class="n">DATE_COL</span><span class="p">,</span> <span class="n">TANK_COL</span><span class="p">,</span> <span class="s2">&quot;oil_vol&quot;</span><span class="p">,</span> <span class="s2">&quot;water_vol&quot;</span><span class="p">,</span> <span class="s2">&quot;gas_vol&quot;</span><span class="p">]</span>
    <span class="n">df_tank</span> <span class="o">=</span> <span class="p">(</span><span class="n">prod</span><span class="p">[</span><span class="n">cols_group</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
        <span class="n">cols_group</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">TANK_COL</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">())</span>

    <span class="c1"># Rename of columns of DataFrame</span>
    <span class="n">df_tank</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;oil_vol&quot;</span><span class="p">:</span> <span class="n">OIL_CUM_COL</span><span class="p">,</span>
            <span class="s2">&quot;water_vol&quot;</span><span class="p">:</span> <span class="n">WATER_CUM_COL</span><span class="p">,</span>
            <span class="s2">&quot;gas_vol&quot;</span><span class="p">:</span> <span class="n">GAS_CUM_COL</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">oil_cum_per_tank</span> <span class="o">=</span> <span class="n">OIL_CUM_COL</span> <span class="o">+</span> <span class="s2">&quot;_TANK&quot;</span>
    <span class="n">water_cum_per_tank</span> <span class="o">=</span> <span class="n">WATER_CUM_COL</span> <span class="o">+</span> <span class="s2">&quot;_TANK&quot;</span>
    <span class="n">gas_cum_per_tank</span> <span class="o">=</span> <span class="n">GAS_CUM_COL</span> <span class="o">+</span> <span class="s2">&quot;_TANK&quot;</span>

    <span class="c1"># Interpolated Cumulative production</span>
    <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">cum_col</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
            <span class="p">[</span><span class="n">oil_cum_per_tank</span><span class="p">,</span> <span class="n">water_cum_per_tank</span><span class="p">,</span> <span class="n">gas_cum_per_tank</span><span class="p">],</span>
            <span class="p">[</span><span class="n">OIL_CUM_COL</span><span class="p">,</span> <span class="n">WATER_CUM_COL</span><span class="p">,</span> <span class="n">GAS_CUM_COL</span><span class="p">],</span>
    <span class="p">):</span>
        <span class="n">avg</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">avg</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">g</span><span class="p">:</span> <span class="n">interp_dates_row</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">DATE_COL</span><span class="p">,</span> <span class="n">df_tank</span><span class="p">,</span> <span class="n">DATE_COL</span><span class="p">,</span>
                                       <span class="n">cum_col</span><span class="p">,</span> <span class="n">TANK_COL</span><span class="p">,</span> <span class="n">TANK_COL</span><span class="p">),</span>
            <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Sort by dates of DataFrame</span>
    <span class="n">df_mbal</span> <span class="o">=</span> <span class="n">avg</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">DATE_COL</span><span class="p">)</span>

    <span class="c1"># Interpolated PVT properties from pres_avg</span>
    <span class="n">df_mbal</span><span class="p">[</span><span class="n">OIL_FVF_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_bo_at_press</span><span class="p">(</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
    <span class="n">df_mbal</span><span class="p">[</span><span class="n">GAS_FVF_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_bg_at_press</span><span class="p">(</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
    <span class="n">df_mbal</span><span class="p">[</span><span class="n">RS_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_rs_at_press</span><span class="p">(</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>

    <span class="c1"># In case properties are calculated using correlations</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">salinity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">temperature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">unit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">df_mbal</span><span class="p">[</span>
            <span class="n">WATER_FVF_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">get_bw_at_press</span><span class="p">(</span>
            <span class="n">df_mbal</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="n">RS_W_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">get_rs_at_press</span><span class="p">(</span>
            <span class="n">df_mbal</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>

        <span class="c1"># In case there are default values for Bw and Rs_w</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df_mbal</span><span class="p">[</span>
            <span class="n">WATER_FVF_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">get_default_bw</span><span class="p">()</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="n">RS_W_COL</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">water_model</span><span class="o">.</span><span class="n">get_default_rs</span><span class="p">()</span>

    <span class="c1"># Creation of time lapses columns</span>
    <span class="n">first_time_lapse</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_timedelta</span><span class="p">(</span>
        <span class="n">df_mbal</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;D&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>
    <span class="n">df_mbal</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_time_lapse</span><span class="o">.</span><span class="n">days</span>
    <span class="n">df_mbal</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_mbal</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
    <span class="n">df_mbal</span><span class="p">[</span><span class="n">GAS_FVF_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_mbal</span><span class="p">[</span><span class="n">GAS_FVF_COL</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="c1"># Calculated values of Eo, Eg, Efw and F columns</span>
    <span class="n">mbal_term</span> <span class="o">=</span> <span class="n">ho_terms_equation</span><span class="p">(</span>
        <span class="n">df_mbal</span><span class="p">,</span>
        <span class="n">OIL_CUM_TANK</span><span class="p">,</span>
        <span class="n">WATER_CUM_TANK</span><span class="p">,</span>
        <span class="n">GAS_CUM_TANK</span><span class="p">,</span>
        <span class="n">PRESSURE_COL</span><span class="p">,</span>
        <span class="n">OIL_FVF_COL</span><span class="p">,</span>
        <span class="n">GAS_FVF_COL</span><span class="p">,</span>
        <span class="n">RS_COL</span><span class="p">,</span>
        <span class="n">WATER_FVF_COL</span><span class="p">,</span>
        <span class="n">RS_W_COL</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">swo</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">cw</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">cf</span><span class="p">,</span>
        <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_bo_at_press</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">)),</span>
        <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_bg_at_press</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">)),</span>
        <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_bo_at_press</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">)),</span>
        <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">oil_model</span><span class="o">.</span><span class="n">get_rs_at_press</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">)),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">mbal_final_per_tank</span> <span class="o">=</span> <span class="n">mbal_term</span>

    <span class="c1"># Creation of WE value according to the aquifer model</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mbal_final_per_tank</span><span class="p">[</span><span class="n">WE</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">Fetkovich</span><span class="p">):</span>
        <span class="c1"># If the aquifer instance is Fetkovich, take the pressure and -</span>
        <span class="c1"># time values that Fetkovich needs from mbal_final_per_tank</span>
        <span class="n">pr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mbal_final_per_tank</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
        <span class="n">time_step</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mbal_final_per_tank</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">_set_pr_and_time_step</span><span class="p">(</span><span class="n">pr</span><span class="p">,</span> <span class="n">time_step</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">we</span><span class="p">()</span>
        <span class="n">mbal_final_per_tank</span> <span class="o">=</span> <span class="n">mbal_final_per_tank</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Cumulative We&quot;</span><span class="p">])</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="p">,</span> <span class="n">CarterTracy</span><span class="p">):</span>
        <span class="c1"># If the aquifer instance is Fetkovich, take the pressure and -</span>
        <span class="c1"># time values that Fetkovich needs from mbal_final_per_tank</span>
        <span class="n">pr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mbal_final_per_tank</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">])</span>
        <span class="n">time_step</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mbal_final_per_tank</span><span class="p">[</span><span class="s2">&quot;Time_Step&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">_set_pr_and_time_step</span><span class="p">(</span><span class="n">pr</span><span class="p">,</span> <span class="n">time_step</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">aquifer</span><span class="o">.</span><span class="n">we</span><span class="p">()</span>
        <span class="n">mbal_final_per_tank</span> <span class="o">=</span> <span class="n">mbal_final_per_tank</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Cumulative We&quot;</span><span class="p">])</span>

    <span class="c1"># final mbal DataFrame</span>
    <span class="k">return</span> <span class="n">mbal_final_per_tank</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.plot_cum_prod_time" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plot_cum_prod_time</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to generate a graph.
:return:
plt.Figure: Graph of Oil and Water Cumulative Production vs Time.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_cum_prod_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to generate a graph.</span>
<span class="sd">    :return:</span>
<span class="sd">    plt.Figure: Graph of Oil and Water Cumulative Production vs Time.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Average Pressure Data</span>
    <span class="n">df_press_avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
    <span class="n">fig1</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">,</span> <span class="n">WATER_CUM_TANK</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
                 <span class="n">df_press_avg</span><span class="p">[</span><span class="n">col</span><span class="p">],</span>
                 <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                 <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

    <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="s2">&quot;Cumulative Production per Date - &quot;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Production [MMStb]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="c1"># formatter for the axes in M</span>
    <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.plot_cum_prod_tot_time" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plot_cum_prod_tot_time</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to generate a graph.
:return:
plt.Figure: Graph of Total Liquid Cumulative Production vs Time.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_cum_prod_tot_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to generate a graph.</span>
<span class="sd">    :return:</span>
<span class="sd">    plt.Figure: Graph of Total Liquid Cumulative Production vs Time.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Average Pressure Data</span>
    <span class="n">df_press_avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>

    <span class="n">fig2</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="s2">&quot;skyblue&quot;</span>
    <span class="n">total_liquid</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">]</span> <span class="o">+</span>
                    <span class="n">df_press_avg</span><span class="p">[</span><span class="n">WATER_CUM_TANK</span><span class="p">])</span>

    <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
             <span class="n">total_liquid</span><span class="p">,</span>
             <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
             <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Total Liquid&quot;</span><span class="p">)</span>

    <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="s2">&quot;Cumulative Total Liquid Production per Date - &quot;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Production [MMStb]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="c1"># formatter for the axes in M</span>
    <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig2</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.plot_cum_prod_well" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plot_cum_prod_well</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to generate a graph.
:return:
plt.Figure: Graph of Cumulative Production per Well of Tank.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_cum_prod_well</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to generate a graph.</span>
<span class="sd">    :return:</span>
<span class="sd">    plt.Figure: Graph of Cumulative Production per Well of Tank.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Production Data</span>
    <span class="n">df_prod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">get_production_df</span><span class="p">()</span>
    <span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
    <span class="n">df_prod</span> <span class="o">=</span> <span class="n">df_prod</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">DATE_COL</span><span class="p">)</span>
    <span class="c1"># Well Group</span>
    <span class="n">df_prod_well</span> <span class="o">=</span> <span class="n">df_prod</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">WELL_COL</span><span class="p">)[[</span><span class="n">OIL_CUM_COL</span><span class="p">,</span>
                                              <span class="n">WATER_CUM_COL</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">well_ind</span> <span class="o">=</span> <span class="n">df_prod_well</span><span class="o">.</span><span class="n">index</span>
    <span class="n">bar_witd</span> <span class="o">=</span> <span class="mf">0.35</span>
    <span class="n">r1</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">well_ind</span><span class="p">))</span>
    <span class="n">r2</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="n">bar_witd</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">]</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
        <span class="n">r1</span><span class="p">,</span>
        <span class="n">df_prod_well</span><span class="p">[</span><span class="n">OIL_CUM_COL</span><span class="p">],</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="n">bar_witd</span><span class="p">,</span>
        <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Oil Cumulative&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
        <span class="n">r2</span><span class="p">,</span>
        <span class="n">df_prod_well</span><span class="p">[</span><span class="n">WATER_CUM_COL</span><span class="p">],</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="n">bar_witd</span><span class="p">,</span>
        <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Water Cumulative&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="s2">&quot;Cumulative Production per Well - &quot;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Well&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Production [Stb]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="n">r</span> <span class="o">+</span> <span class="n">bar_witd</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">well_ind</span><span class="p">))])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span>
        <span class="n">well_ind</span><span class="p">,</span>
        <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span>
        <span class="n">fontproperties</span><span class="o">=</span><span class="n">FontProperties</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mf">8.5</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="c1"># formatter for the axes in M</span>
    <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.plot_flow_rate_tank" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plot_flow_rate_tank</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to generate a graph.
:return:
plt.Figure: A graph of Flow Rate vs Time by Tank.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_flow_rate_tank</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method to generate a graph.</span>
<span class="sd">    :return:</span>
<span class="sd">    plt.Figure: A graph of Flow Rate vs Time by Tank.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Production Data</span>
    <span class="c1"># Average Pressure Data</span>
    <span class="n">df_prod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
    <span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
    <span class="n">df_prod</span> <span class="o">=</span> <span class="n">df_prod</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">DATE_COL</span><span class="p">)</span>

    <span class="c1"># Days</span>
    <span class="c1"># df_prod[&quot;Days&quot;] = df_prod[DATE_COL].diff().dt.days.fillna(0)</span>
    <span class="c1"># df_prod.loc[df_prod[&quot;Days&quot;] == 0, &quot;Days&quot;] = 365</span>

    <span class="c1"># Calculate daily production rates from cumulative productions.</span>
    <span class="n">df_prod</span><span class="p">[</span><span class="n">OIL_RATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_prod</span><span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">df_prod</span><span class="p">[</span><span class="n">WATER_RATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_prod</span><span class="p">[</span><span class="n">WATER_CUM_TANK</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Oil rate</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">OIL_RATE_COL</span><span class="p">],</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Oil flow Rate&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="s2">&quot;Oil Flow Rate vs Time by &quot;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Flow Rate [Stb/year]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="c1"># Water rate</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
        <span class="n">df_prod</span><span class="p">[</span><span class="n">WATER_RATE_COL</span><span class="p">],</span>
        <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Water flow rate&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="s2">&quot;Water Flow Rate vs Time by &quot;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Flow Rate [Stb/year]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="c1"># formatter for the axes in K</span>
    <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">K&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-3</span><span class="p">))</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

    <span class="c1"># formatter for the axes in K</span>
    <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">K&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-3</span><span class="p">))</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.plot_flow_rate_well" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plot_flow_rate_well</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to generate a graph.
:return:
plt.Figure: A graph of Flow Rate vs Time per Rate of Tank.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_flow_rate_well</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to generate a graph.</span>
<span class="sd">    :return:</span>
<span class="sd">    plt.Figure: A graph of Flow Rate vs Time per Rate of Tank.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Production Data</span>
    <span class="n">df_prod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">get_production_df</span><span class="p">()</span>
    <span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_prod</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
    <span class="n">df_prod</span> <span class="o">=</span> <span class="n">df_prod</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">DATE_COL</span><span class="p">)</span>

    <span class="c1"># days</span>
    <span class="c1"># df_prod[&quot;Days&quot;] = df_prod[DATE_COL].diff().dt.days.fillna(0)</span>
    <span class="c1"># df_prod.loc[df_prod[&quot;Days&quot;] == 0, &quot;Days&quot;] = 365</span>

    <span class="c1"># Calculate daily production rates from cumulative productions.</span>
    <span class="n">df_prod</span><span class="p">[</span><span class="n">OIL_RATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_prod</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
        <span class="n">WELL_COL</span><span class="p">)[</span><span class="n">OIL_CUM_COL</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">df_prod</span><span class="p">[</span><span class="n">WATER_RATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">df_prod</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">WELL_COL</span><span class="p">)[</span><span class="n">WATER_CUM_COL</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

    <span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">wells</span> <span class="o">=</span> <span class="n">df_prod</span><span class="p">[</span><span class="n">WELL_COL</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;tab10&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">wells</span><span class="p">))</span>

    <span class="c1"># Plot of Oil Flow Rate</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">well</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">wells</span><span class="p">):</span>
        <span class="n">well_data</span> <span class="o">=</span> <span class="n">df_prod</span><span class="p">[</span><span class="n">df_prod</span><span class="p">[</span><span class="n">WELL_COL</span><span class="p">]</span> <span class="o">==</span> <span class="n">well</span><span class="p">]</span>
        <span class="n">dates</span> <span class="o">=</span> <span class="n">well_data</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span>

        <span class="c1"># Oil rate</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span>
                 <span class="n">well_data</span><span class="p">[</span><span class="n">OIL_RATE_COL</span><span class="p">],</span>
                 <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">well</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Oil Flow Rate vs Time by Well - &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span>
                <span class="n">upper</span><span class="p">()),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Flow Rate [Stb/year]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

        <span class="c1"># Water rate</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span>
                 <span class="n">well_data</span><span class="p">[</span><span class="n">WATER_RATE_COL</span><span class="p">],</span>
                 <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">well</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
            <span class="s2">&quot;Water Flow Rate vs Time by Well - &quot;</span> <span class="o">+</span>
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span>
                <span class="n">upper</span><span class="p">()),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Flow Rate [Stb/year]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

    <span class="c1"># Set Y-axis limit&#39;</span>
    <span class="n">y_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">df_prod</span><span class="p">[</span><span class="n">OIL_RATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">df_prod</span><span class="p">[</span><span class="n">WATER_RATE_COL</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
    <span class="n">y_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_max</span> <span class="o">//</span> <span class="mi">20000</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">20000</span>

    <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_max</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20000</span><span class="p">))</span>

    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_max</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20000</span><span class="p">))</span>

    <span class="c1"># formatter for the axes in K</span>
    <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">K&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-3</span><span class="p">))</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

    <span class="c1"># formatter for the axes in K</span>
    <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.0f}</span><span class="s2">K&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-3</span><span class="p">))</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.plot_press_avg_liq_cum" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plot_press_avg_liq_cum</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to generate a graph.
:return:
Graph of Average Pressure vs Cumulative Liquids (Oil and Water).</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_press_avg_liq_cum</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to generate a graph.</span>
<span class="sd">    :return:</span>
<span class="sd">    Graph of Average Pressure vs Cumulative Liquids (Oil and Water).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Average Pressure Data</span>
    <span class="n">df_press_avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
    <span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
    <span class="n">df_press_avg</span> <span class="o">=</span> <span class="n">df_press_avg</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">PRESSURE_COL</span><span class="p">)</span>
    <span class="n">fig7</span><span class="p">,</span> <span class="n">ax7</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">OIL_CUM_TANK</span><span class="p">,</span> <span class="n">WATER_CUM_TANK</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
        <span class="n">ax7</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="n">col</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">ax7</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="s2">&quot;Average Pressure vs Cumulative Production - &quot;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax7</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Average Pressure&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax7</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Production&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax7</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="c1"># formatter for the axes in M</span>
    <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
    <span class="n">ax7</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig7</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.plot_press_avg_time" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plot_press_avg_time</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to generate a graph.
:return:
plt.Figure: Graph of Average Pressure vs Time.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_press_avg_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to generate a graph.</span>
<span class="sd">    :return:</span>
<span class="sd">    plt.Figure: Graph of Average Pressure vs Time.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Average Pressure Data</span>
    <span class="n">df_press_avg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_bal_df</span><span class="p">()</span>
    <span class="n">fig4</span><span class="p">,</span> <span class="n">ax4</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;red&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">smooth</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">ax4</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="s2">&quot;AVG_PRESS&quot;</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot; Avg Pressure&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax4</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Avg Pressure (Smoothed)&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax4</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
            <span class="n">df_press_avg</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot; Avg Pressure&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">ax4</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="s2">&quot;Pressure per Date - &quot;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax4</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax4</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Average Pressure[PSI]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax4</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig4</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.plot_press_liq_cum" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plot_press_liq_cum</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to generate a graph.
:return:
plt.Figure: Graph of Pressure vs Cumulative Liquids (Oil and Water).</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_press_liq_cum</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to generate a graph.</span>
<span class="sd">    :return:</span>
<span class="sd">    plt.Figure: Graph of Pressure vs Cumulative Liquids (Oil and Water).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Pressure date with Cumulative Production</span>
    <span class="n">df_press_cum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_uw</span><span class="p">()</span>
    <span class="n">df_press_cum</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_press_cum</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
    <span class="n">df_press_cum</span> <span class="o">=</span> <span class="n">df_press_cum</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">PRESSURE_COL</span><span class="p">)</span>

    <span class="n">fig6</span><span class="p">,</span> <span class="n">ax6</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">]</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">OIL_CUM_COL</span><span class="p">,</span> <span class="n">WATER_CUM_COL</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
        <span class="n">ax6</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
            <span class="n">df_press_cum</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
            <span class="n">df_press_cum</span><span class="p">[</span><span class="n">col</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">ax6</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="s2">&quot;Pressure vs Cumulative Production - &quot;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax6</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Pressure&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax6</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Cumulative Production&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax6</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

    <span class="c1"># formatter for the axes in M</span>
    <span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">M&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">1e-6</span><span class="p">))</span>
    <span class="n">ax6</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig6</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pytank.analysis.Analysis.plot_press_time" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plot_press_time</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Method to generate a graph.
:return:
plt.Figure: Graph of normal Pressure vs Time.</p>

            <details class="quote">
              <summary>Source code in <code>pytank\analysis.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot_press_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method to generate a graph.</span>
<span class="sd">    :return:</span>
<span class="sd">    plt.Figure: Graph of normal Pressure vs Time.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Pressure Data</span>
    <span class="n">df_press</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tank_class</span><span class="o">.</span><span class="n">get_pressure_df</span><span class="p">()</span>
    <span class="n">df_press</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_press</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">])</span>
    <span class="n">df_press</span> <span class="o">=</span> <span class="n">df_press</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">DATE_COL</span><span class="p">)</span>

    <span class="n">fig3</span><span class="p">,</span> <span class="n">ax3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
    <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;green&quot;</span>

    <span class="n">ax3</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df_press</span><span class="p">[</span><span class="n">DATE_COL</span><span class="p">],</span>
                <span class="n">df_press</span><span class="p">[</span><span class="n">PRESSURE_COL</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Pressure&quot;</span><span class="p">)</span>

    <span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span>
        <span class="s2">&quot;Pressure per Date - &quot;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">df_press</span><span class="p">[</span><span class="n">TANK_COL</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax3</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax3</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Pressure [PSI]&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">ax3</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fig3</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_HTML"></script>
      
    
  </body>
</html>